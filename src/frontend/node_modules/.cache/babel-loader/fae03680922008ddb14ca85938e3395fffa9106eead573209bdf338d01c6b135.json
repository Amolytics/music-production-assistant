{"ast":null,"code":"// Simple WebSocket client utility for React\nexport class WSClient{constructor(url){this.ws=null;this.url=void 0;this.onMessageCallback=null;// If no URL is provided, build it from window.location\nif(url){this.url=url;}else{const loc=window.location;let wsProto=loc.protocol==='https:'?'wss:':'ws:';// Use same host, but port 4000 (backend ws server)\nlet wsHost=loc.hostname;let wsPort='4000';// If running on Codespaces or forwarded port, use location.port if 4000 is not available\nif(loc.port&&loc.port!=='3000')wsPort=loc.port;this.url=\"\".concat(wsProto,\"//\").concat(wsHost,\":\").concat(wsPort);}}connect(){this.ws=new WebSocket(this.url);this.ws.onopen=()=>{console.log('WebSocket connected');};this.ws.onmessage=event=>{if(this.onMessageCallback)this.onMessageCallback(event.data);};this.ws.onclose=()=>{console.log('WebSocket disconnected');};this.ws.onerror=err=>{console.error('WebSocket error',err);};}send(msg){if(this.ws&&this.ws.readyState===WebSocket.OPEN){this.ws.send(msg);}}onMessage(cb){this.onMessageCallback=cb;}}","map":{"version":3,"names":["WSClient","constructor","url","ws","onMessageCallback","loc","window","location","wsProto","protocol","wsHost","hostname","wsPort","port","concat","connect","WebSocket","onopen","console","log","onmessage","event","data","onclose","onerror","err","error","send","msg","readyState","OPEN","onMessage","cb"],"sources":["/workspaces/music-production-assistant/src/frontend/src/wsClient.ts"],"sourcesContent":["// Simple WebSocket client utility for React\nexport class WSClient {\n  ws: WebSocket | null = null;\n  url: string;\n  onMessageCallback: ((msg: string) => void) | null = null;\n\n  constructor(url?: string) {\n    // If no URL is provided, build it from window.location\n    if (url) {\n      this.url = url;\n    } else {\n      const loc = window.location;\n      let wsProto = loc.protocol === 'https:' ? 'wss:' : 'ws:';\n      // Use same host, but port 4000 (backend ws server)\n      let wsHost = loc.hostname;\n      let wsPort = '4000';\n      // If running on Codespaces or forwarded port, use location.port if 4000 is not available\n      if (loc.port && loc.port !== '3000') wsPort = loc.port;\n      this.url = `${wsProto}//${wsHost}:${wsPort}`;\n    }\n  }\n\n  connect() {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = () => {\n      console.log('WebSocket connected');\n    };\n    this.ws.onmessage = (event) => {\n      if (this.onMessageCallback) this.onMessageCallback(event.data);\n    };\n    this.ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    this.ws.onerror = (err) => {\n      console.error('WebSocket error', err);\n    };\n  }\n\n  send(msg: string) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(msg);\n    }\n  }\n\n  onMessage(cb: (msg: string) => void) {\n    this.onMessageCallback = cb;\n  }\n}\n"],"mappings":"AAAA;AACA,MAAO,MAAM,CAAAA,QAAS,CAKpBC,WAAWA,CAACC,GAAY,CAAE,MAJ1BC,EAAE,CAAqB,IAAI,MAC3BD,GAAG,aACHE,iBAAiB,CAAmC,IAAI,CAGtD;AACA,GAAIF,GAAG,CAAE,CACP,IAAI,CAACA,GAAG,CAAGA,GAAG,CAChB,CAAC,IAAM,CACL,KAAM,CAAAG,GAAG,CAAGC,MAAM,CAACC,QAAQ,CAC3B,GAAI,CAAAC,OAAO,CAAGH,GAAG,CAACI,QAAQ,GAAK,QAAQ,CAAG,MAAM,CAAG,KAAK,CACxD;AACA,GAAI,CAAAC,MAAM,CAAGL,GAAG,CAACM,QAAQ,CACzB,GAAI,CAAAC,MAAM,CAAG,MAAM,CACnB;AACA,GAAIP,GAAG,CAACQ,IAAI,EAAIR,GAAG,CAACQ,IAAI,GAAK,MAAM,CAAED,MAAM,CAAGP,GAAG,CAACQ,IAAI,CACtD,IAAI,CAACX,GAAG,IAAAY,MAAA,CAAMN,OAAO,OAAAM,MAAA,CAAKJ,MAAM,MAAAI,MAAA,CAAIF,MAAM,CAAE,CAC9C,CACF,CAEAG,OAAOA,CAAA,CAAG,CACR,IAAI,CAACZ,EAAE,CAAG,GAAI,CAAAa,SAAS,CAAC,IAAI,CAACd,GAAG,CAAC,CACjC,IAAI,CAACC,EAAE,CAACc,MAAM,CAAG,IAAM,CACrBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CACpC,CAAC,CACD,IAAI,CAAChB,EAAE,CAACiB,SAAS,CAAIC,KAAK,EAAK,CAC7B,GAAI,IAAI,CAACjB,iBAAiB,CAAE,IAAI,CAACA,iBAAiB,CAACiB,KAAK,CAACC,IAAI,CAAC,CAChE,CAAC,CACD,IAAI,CAACnB,EAAE,CAACoB,OAAO,CAAG,IAAM,CACtBL,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACvC,CAAC,CACD,IAAI,CAAChB,EAAE,CAACqB,OAAO,CAAIC,GAAG,EAAK,CACzBP,OAAO,CAACQ,KAAK,CAAC,iBAAiB,CAAED,GAAG,CAAC,CACvC,CAAC,CACH,CAEAE,IAAIA,CAACC,GAAW,CAAE,CAChB,GAAI,IAAI,CAACzB,EAAE,EAAI,IAAI,CAACA,EAAE,CAAC0B,UAAU,GAAKb,SAAS,CAACc,IAAI,CAAE,CACpD,IAAI,CAAC3B,EAAE,CAACwB,IAAI,CAACC,GAAG,CAAC,CACnB,CACF,CAEAG,SAASA,CAACC,EAAyB,CAAE,CACnC,IAAI,CAAC5B,iBAAiB,CAAG4B,EAAE,CAC7B,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}