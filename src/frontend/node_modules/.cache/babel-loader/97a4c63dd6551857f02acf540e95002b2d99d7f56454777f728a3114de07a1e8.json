{"ast":null,"code":"// Simple WebSocket client utility for React\nexport class WSClient {\n  constructor(url) {\n    this.ws = null;\n    this.url = void 0;\n    this.onMessageCallback = null;\n    // If no URL is provided, build it from window.location\n    if (url) {\n      this.url = url;\n    } else {\n      const loc = window.location;\n      let wsProto = loc.protocol === 'https:' ? 'wss:' : 'ws:';\n      // Use same host, but port 4000 (backend ws server)\n      let wsHost = loc.hostname;\n      let wsPort = '4000';\n      // If running on Codespaces or forwarded port, use location.port if 4000 is not available\n      if (loc.port && loc.port !== '3000') wsPort = loc.port;\n      this.url = `${wsProto}//${wsHost}:${wsPort}`;\n    }\n  }\n  connect() {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = () => {\n      console.log('WebSocket connected');\n    };\n    this.ws.onmessage = event => {\n      if (this.onMessageCallback) this.onMessageCallback(event.data);\n    };\n    this.ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    this.ws.onerror = err => {\n      console.error('WebSocket error', err);\n    };\n  }\n  send(msg) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(msg);\n    }\n  }\n  onMessage(cb) {\n    this.onMessageCallback = cb;\n  }\n}","map":{"version":3,"names":["WSClient","constructor","url","ws","onMessageCallback","loc","window","location","wsProto","protocol","wsHost","hostname","wsPort","port","connect","WebSocket","onopen","console","log","onmessage","event","data","onclose","onerror","err","error","send","msg","readyState","OPEN","onMessage","cb"],"sources":["/workspaces/music-production-assistant/src/frontend/src/wsClient.ts"],"sourcesContent":["// Simple WebSocket client utility for React\nexport class WSClient {\n  ws: WebSocket | null = null;\n  url: string;\n  onMessageCallback: ((msg: string) => void) | null = null;\n\n  constructor(url?: string) {\n    // If no URL is provided, build it from window.location\n    if (url) {\n      this.url = url;\n    } else {\n      const loc = window.location;\n      let wsProto = loc.protocol === 'https:' ? 'wss:' : 'ws:';\n      // Use same host, but port 4000 (backend ws server)\n      let wsHost = loc.hostname;\n      let wsPort = '4000';\n      // If running on Codespaces or forwarded port, use location.port if 4000 is not available\n      if (loc.port && loc.port !== '3000') wsPort = loc.port;\n      this.url = `${wsProto}//${wsHost}:${wsPort}`;\n    }\n  }\n\n  connect() {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = () => {\n      console.log('WebSocket connected');\n    };\n    this.ws.onmessage = (event) => {\n      if (this.onMessageCallback) this.onMessageCallback(event.data);\n    };\n    this.ws.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    this.ws.onerror = (err) => {\n      console.error('WebSocket error', err);\n    };\n  }\n\n  send(msg: string) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(msg);\n    }\n  }\n\n  onMessage(cb: (msg: string) => void) {\n    this.onMessageCallback = cb;\n  }\n}\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,QAAQ,CAAC;EAKpBC,WAAWA,CAACC,GAAY,EAAE;IAAA,KAJ1BC,EAAE,GAAqB,IAAI;IAAA,KAC3BD,GAAG;IAAA,KACHE,iBAAiB,GAAmC,IAAI;IAGtD;IACA,IAAIF,GAAG,EAAE;MACP,IAAI,CAACA,GAAG,GAAGA,GAAG;IAChB,CAAC,MAAM;MACL,MAAMG,GAAG,GAAGC,MAAM,CAACC,QAAQ;MAC3B,IAAIC,OAAO,GAAGH,GAAG,CAACI,QAAQ,KAAK,QAAQ,GAAG,MAAM,GAAG,KAAK;MACxD;MACA,IAAIC,MAAM,GAAGL,GAAG,CAACM,QAAQ;MACzB,IAAIC,MAAM,GAAG,MAAM;MACnB;MACA,IAAIP,GAAG,CAACQ,IAAI,IAAIR,GAAG,CAACQ,IAAI,KAAK,MAAM,EAAED,MAAM,GAAGP,GAAG,CAACQ,IAAI;MACtD,IAAI,CAACX,GAAG,GAAG,GAAGM,OAAO,KAAKE,MAAM,IAAIE,MAAM,EAAE;IAC9C;EACF;EAEAE,OAAOA,CAAA,EAAG;IACR,IAAI,CAACX,EAAE,GAAG,IAAIY,SAAS,CAAC,IAAI,CAACb,GAAG,CAAC;IACjC,IAAI,CAACC,EAAE,CAACa,MAAM,GAAG,MAAM;MACrBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACpC,CAAC;IACD,IAAI,CAACf,EAAE,CAACgB,SAAS,GAAIC,KAAK,IAAK;MAC7B,IAAI,IAAI,CAAChB,iBAAiB,EAAE,IAAI,CAACA,iBAAiB,CAACgB,KAAK,CAACC,IAAI,CAAC;IAChE,CAAC;IACD,IAAI,CAAClB,EAAE,CAACmB,OAAO,GAAG,MAAM;MACtBL,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACvC,CAAC;IACD,IAAI,CAACf,EAAE,CAACoB,OAAO,GAAIC,GAAG,IAAK;MACzBP,OAAO,CAACQ,KAAK,CAAC,iBAAiB,EAAED,GAAG,CAAC;IACvC,CAAC;EACH;EAEAE,IAAIA,CAACC,GAAW,EAAE;IAChB,IAAI,IAAI,CAACxB,EAAE,IAAI,IAAI,CAACA,EAAE,CAACyB,UAAU,KAAKb,SAAS,CAACc,IAAI,EAAE;MACpD,IAAI,CAAC1B,EAAE,CAACuB,IAAI,CAACC,GAAG,CAAC;IACnB;EACF;EAEAG,SAASA,CAACC,EAAyB,EAAE;IACnC,IAAI,CAAC3B,iBAAiB,GAAG2B,EAAE;EAC7B;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}