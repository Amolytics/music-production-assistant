{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{WSClient}from'../wsClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Collaboration(){const[email,setEmail]=useState('');const[response,setResponse]=useState('');const[loading,setLoading]=useState(false);const[wsMsg,setWsMsg]=useState('');const[wsLog,setWsLog]=useState([]);const wsRef=useRef(null);const BACKEND_URL=process.env.REACT_APP_BACKEND_URL||'';useEffect(()=>{const ws=new WSClient();// auto-detects correct URL\nws.connect();ws.onMessage(msg=>setWsLog(log=>[...log,msg]));wsRef.current=ws;return()=>{// No explicit close needed for demo\n};},[]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const res=await fetch(\"\".concat(BACKEND_URL,\"/collab/invite\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});const data=await res.json();setResponse(\"Status: \".concat(data.status,\", Email: \").concat(data.email));}catch(err){setResponse('Error inviting collaborator');}setLoading(false);};const handleWsSend=e=>{e.preventDefault();if(wsRef.current){wsRef.current.send(wsMsg);setWsMsg('');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Collaboration\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Work with other producers, songwriters, and artists in real time. Share projects, get feedback, and co-create music from anywhere.\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Real-time project sharing\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Feedback and chat tools\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Invite collaborators\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Cloud-based workflow\"})]}),/*#__PURE__*/_jsxs(\"form\",{style:{marginTop:'2rem'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Invite Collaborator (email):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"username\",style:{width:'120px'}}),/*#__PURE__*/_jsxs(\"select\",{name:\"domain\",onChange:e=>setEmail(email.split('@')[0]+'@'+e.target.value),style:{marginLeft:'0.5rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"gmail.com\",children:\"gmail.com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yahoo.com\",children:\"yahoo.com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"outlook.com\",children:\"outlook.com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"icloud.com\",children:\"icloud.com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"other\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginLeft:'1rem'},disabled:loading,children:loading?'Sending...':'Send Invite'})]}),response&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'1rem'},children:response}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:'2rem 0'}}),/*#__PURE__*/_jsx(\"h3\",{children:\"WebSocket Real-Time Demo\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleWsSend,style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:wsMsg,onChange:e=>setWsMsg(e.target.value),placeholder:\"Type message...\",style:{width:'200px'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginLeft:'0.5rem'},children:\"Send\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'120px',overflowY:'auto',background:'#222',color:'#0ea5e9',padding:'0.5rem',borderRadius:'8px'},children:wsLog.map((msg,i)=>/*#__PURE__*/_jsx(\"div\",{children:msg},i))})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","WSClient","jsx","_jsx","jsxs","_jsxs","Collaboration","email","setEmail","response","setResponse","loading","setLoading","wsMsg","setWsMsg","wsLog","setWsLog","wsRef","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","ws","connect","onMessage","msg","log","current","handleSubmit","e","preventDefault","res","fetch","concat","method","headers","body","JSON","stringify","data","json","status","err","handleWsSend","send","children","style","marginTop","onSubmit","type","name","value","onChange","target","placeholder","width","split","marginLeft","disabled","margin","marginBottom","maxHeight","overflowY","background","color","padding","borderRadius","map","i"],"sources":["/workspaces/music-production-assistant/src/frontend/src/pages/Collaboration.tsx"],"sourcesContent":["\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { WSClient } from '../wsClient';\n\nexport default function Collaboration() {\n\n\n  const [email, setEmail] = useState('');\n  const [response, setResponse] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [wsMsg, setWsMsg] = useState('');\n  const [wsLog, setWsLog] = useState<string[]>([]);\n  const wsRef = useRef<WSClient | null>(null);\n\n  const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || '';\n\n  useEffect(() => {\n    const ws = new WSClient(); // auto-detects correct URL\n    ws.connect();\n    ws.onMessage((msg) => setWsLog((log) => [...log, msg]));\n    wsRef.current = ws;\n    return () => {\n      // No explicit close needed for demo\n    };\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const res = await fetch(`${BACKEND_URL}/collab/invite`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email }),\n      });\n      const data = await res.json();\n      setResponse(`Status: ${data.status}, Email: ${data.email}`);\n    } catch (err) {\n      setResponse('Error inviting collaborator');\n    }\n    setLoading(false);\n  };\n\n  const handleWsSend = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (wsRef.current) {\n      wsRef.current.send(wsMsg);\n      setWsMsg('');\n    }\n  };\n\n  return (\n    <div>\n      <h2>Collaboration</h2>\n      <p>\n        Work with other producers, songwriters, and artists in real time. Share projects, get feedback, and co-create music from anywhere.\n      </p>\n      <ul>\n        <li>Real-time project sharing</li>\n        <li>Feedback and chat tools</li>\n        <li>Invite collaborators</li>\n        <li>Cloud-based workflow</li>\n      </ul>\n      <form style={{marginTop: '2rem'}} onSubmit={handleSubmit}>\n        <label>Invite Collaborator (email):</label>\n        <input type=\"text\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"username\" style={{width: '120px'}} />\n        <select name=\"domain\" onChange={e => setEmail(email.split('@')[0] + '@' + e.target.value)} style={{marginLeft: '0.5rem'}}>\n          <option value=\"gmail.com\">gmail.com</option>\n          <option value=\"yahoo.com\">yahoo.com</option>\n          <option value=\"outlook.com\">outlook.com</option>\n          <option value=\"icloud.com\">icloud.com</option>\n          <option value=\"other\">other</option>\n        </select>\n        <button type=\"submit\" style={{marginLeft: '1rem'}} disabled={loading}>{loading ? 'Sending...' : 'Send Invite'}</button>\n      </form>\n      {response && <div style={{marginTop: '1rem'}}>{response}</div>}\n\n      <hr style={{margin: '2rem 0'}} />\n      <h3>WebSocket Real-Time Demo</h3>\n      <form onSubmit={handleWsSend} style={{marginBottom: '1rem'}}>\n        <input type=\"text\" value={wsMsg} onChange={e => setWsMsg(e.target.value)} placeholder=\"Type message...\" style={{width: '200px'}} />\n        <button type=\"submit\" style={{marginLeft: '0.5rem'}}>Send</button>\n      </form>\n      <div style={{maxHeight: '120px', overflowY: 'auto', background: '#222', color: '#0ea5e9', padding: '0.5rem', borderRadius: '8px'}}>\n        {wsLog.map((msg, i) => <div key={i}>{msg}</div>)}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}